# ELEGSO.site (Astro) — мастер-контекст проекта / промпт для изменений

## Зачем этот файл
Этот README — “контекст-промпт”, который я (Тимченко Тимур) вставляю в чат перед тем, как попросить ИИ внести изменения в сайт.
Цель: чтобы ИИ всегда понимал структуру проекта, правила, что где лежит и как безопасно вносить правки.

---

## 0) Короткая формула работы (важно)
**Правки делаем только в `src/` и `public/`.**  
Ничего из `dist/` вручную не редактируем — это сборка.

---

## 1) Технологии
- SSG: **Astro** (static build)
- CSS: сейчас используется **legacy CSS**, подключён через `src/styles/global.css` -> `src/styles/legacy.css`
- Tailwind установлен в deps, но основной стиль сейчас держится на legacy CSS.

---

## 2) Структура проекта (главное)

### Исходники страниц
- Главная: `src/pages/index.astro`
- Кейсы (список): `src/pages/cases/index.astro`
- Кейс (страница кейса): `src/pages/cases/[slug].astro`
  - Важно: для статической сборки обязательно `export async function getStaticPaths()`.

### Компоненты
- `src/components/TopbarNative.astro` — верхнее меню/шапка
- `src/components/HeroNative.astro` — первый экран
- `src/components/ServicesNative.astro` — услуги
- `src/components/TeamNative.astro` — команда (фото и карточки)
- `src/components/FooterNative.astro` — футер

Есть и другие компоненты в `src/components/`, но “Native” — это текущая рабочая версия лендинга.

### Лейаут
- `src/layouts/Layout.astro`
  - **Он импортирует глобальные стили:** `import "../styles/global.css";`
  - Сюда можно добавлять общее `<head>`, мета, фавикон, аналитики и т.п.

### Данные (контакты и т.п.)
- `src/data/ru/home.json`
  - Тут контакты (телефон/почта/адрес и т.д.), которые подхватываются компонентами.

### Статика (картинки/файлы)
- `public/` — всё из этого каталога доступно на сайте как `/...`
- Фото команды лежат здесь:
  - `public/images/team/*.png`
  - На странице команды ссылки должны быть вида:
    - `/images/team/00-photo-elegso-...png`

---

## 3) Важно про пути и “*_files”
- В проекте **НЕ ДОЛЖНО быть** папок вида `*_files` (это артефакт сохранённого HTML).
- В коде **НЕ ДОЛЖНО быть** ссылок на `..._files/...`.
- Проверка:
  - `grep -RIn "_files" src public`

---

## 4) Сборка / запуск локально
- Dev:
  - `npm run dev -- --host 127.0.0.1 --port 4321`
- Build:
  - `npm run build`
- Output сборки:
  - `dist/`
  - В `dist/_astro/` генерятся css/js ассеты
  - В `dist/images/team/` копируются картинки из `public/images/team/`

---

## 5) Деплой на сервер (контекст)
На сервере сайт разворачивается как статическая сборка `dist`.
(Точные пути/скрипты деплоя могут быть отдельно, но правило: **на проде живёт `dist`**.)

---

## 6) Git / что коммитим
Коммитим только исходники и нужную статику:
- ✅ `src/`
- ✅ `public/`
- ✅ `package.json`, `package-lock.json`
- ✅ `astro.config.mjs`, `tsconfig.json`, `.github/`, `.vscode/` (по желанию)

Не коммитим:
- ❌ `node_modules/`
- ❌ `dist/`
- ❌ `.astro/`
- ❌ `.tmp/`
- ❌ `.trash-bak/`
- ❌ `.DS_Store`

---

## 7) Правила для ИИ перед изменениями (чек-лист)
Когда я прошу “внеси изменения”, ИИ должен:

1) **Сначала понять задачу** и сказать какие файлы будет менять (1–3 файла максимум обычно).
2) Делать изменения **минимально**, без “рефакторинга ради рефакторинга”.
3) **Не трогать** `dist/` и `node_modules/`.
4) После правок:
   - `npm run build`
   - проверить что нет `_files` ссылок:
     - `grep -RIn "_files" src public || echo "OK"`
5) Если правка затрагивает картинки:
   - класть в `public/images/...`
   - ссылки в коде делать абсолютными `/images/...`

---

## 8) Как я (Тимур) задаю изменения в чат
Я вставляю сюда (в чат) этот README, затем пишу:
- “Сделай X”
- “Поменяй текст Y”
- “Добавь секцию Z”
- “Сделай новую страницу /cases/NEW”
- “Обнови телефон/почту в контактах”
и ИИ должен менять нужные файлы строго по правилам выше.

---

## 9) Быстрые команды диагностики
- Найти “битые” ссылки на _files:
  - `grep -RIn "_files" src public`
- Проверить картинки команды:
  - `ls -lah public/images/team`
- Дерево dist (после сборки):
  - `find dist -maxdepth 3 -type f | sort | head -n 80`

---

## 10) Текущий статус, который считается “рабочим”
- Главная работает локально
- Кейсы:
  - `/cases/` — список
  - `/cases/leasing-case/` — кейс
- `_files` папок нет
- Фото команды в `public/images/team/`
- CSS вынесен в:
  - `src/styles/legacy.css`
  - `src/styles/global.css` импортирует legacy

