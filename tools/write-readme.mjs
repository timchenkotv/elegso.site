import { writeFileSync } from "node:fs";

const readme = `# ELEGSO.site (Astro)

Статический сайт юридической компании **ELEGSO** на **Astro**.  
Проект рассчитан на быстрые правки и стабильную сборку в \`dist/\`.

---

## Быстрый старт (локально)

\`\`\`bash
npm install
npm run dev -- --host 127.0.0.1 --port 4321
\`\`\`

Сборка статики:

\`\`\`bash
npm run build
\`\`\`

Проверка собранного \`dist/\`:

\`\`\`bash
npm run preview -- --host 127.0.0.1 --port 4321
\`\`\`

---

## Карта проекта

### Директории

- \`src/\` — исходники сайта (страницы/компоненты/стили)
- \`public/\` — статика, копируется в \`dist/\` как есть  
  пример: \`public/images/team/*\` → \`dist/images/team/*\`
- \`dist/\` — результат сборки (генерируется \`npm run build\`)
- \`.trash-bak/\` — наша “корзина” (временное/архив)
- \`.tmp/\` — временные патчи/скрипты

### Страницы

- \`src/pages/index.astro\` — главная
- \`src/pages/cases/index.astro\` — список кейсов
- \`src/pages/cases/[slug].astro\` — кейс (в static-режиме нужен \`getStaticPaths()\`)

### Layout и стили

- \`src/layouts/Layout.astro\` — общий layout + head + подключение CSS
- \`src/styles/global.css\` — точка входа (чистая)
- \`src/styles/legacy.css\` — текущие “наследные” стили (подключаются через global.css)

---

## Правило путей к картинкам: почему \`/images/...\`

Мы используем пути вида:

- ✅ \`/images/team/00-photo-....png\`

Потому что это **путь от корня сайта**, он:
- не зависит от того, на какой странице ты находишься (\`/cases/... \` не ломает относительные пути)
- не привязан к домену (если домен поменяется — всё равно будет \`https://новыйдомен/images/...\`)

Важно: если сайт когда-нибудь будет жить в подпапке (например \`/site/\`), тогда нужно будет настроить \`base\` в Astro или использовать \`import.meta.env.BASE_URL\`.

---

## Что коммитим, а что нет

Обычно **НЕ коммитим**:
- \`node_modules/\`
- \`.astro/\`
- \`dist/\`
- логи/кэши/системные файлы

\`.trash-bak/\` и \`.tmp/\` — по желанию: сейчас можно хранить локально, в git не обязательно.

---

## Типовой процесс правки

1) Запуск:
\`\`\`bash
npm run dev -- --host 127.0.0.1 --port 4321
\`\`\`

2) Правки в \`src/...\` или \`public/...\`

3) Сборка:
\`\`\`bash
npm run build
\`\`\`

4) Проверка:
- \`dist/index.html\`
- \`dist/_astro/*.css\`
- \`dist/images/team/*.png\`
- \`dist/cases/.../index.html\`

---

## “Промпт для ИИ” перед правками

Всегда указывай:
1) **что меняем**
2) **где меняем** (файл/папка)
3) **ограничения** (не ломать стиль, не трогать лишнее)
4) **после правки** сборка \`npm run build\` должна проходить без ошибок
`;

writeFileSync("README.md", readme, "utf8");
console.log("OK: README.md written");
